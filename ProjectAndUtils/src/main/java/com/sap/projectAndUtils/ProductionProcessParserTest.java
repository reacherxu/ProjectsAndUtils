package com.sap.projectAndUtils;


import org.dom4j.Node;
import org.junit.Assert;
import org.junit.Test;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import com.sap.cdt.domain.enums.ErrorCode;
import com.sap.cdt.domain.enums.MODRuntimeException;
import com.sap.projectAndUtils.ProductionProcessParser.DMEChain;

public class ProductionProcessParserTest {

    private final Logger logger = LoggerFactory.getLogger(this.getClass());

    public static String VALID_PRODUCTION_PROCESS =
            "<bpmn2:definitions id='6097de8b-7271-4f52-bf2e-d93635127b2d' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:bpmn2='http://www.omg.org/spec/BPMN/20100524/MODEL' xmlns:bpmndi='http://www.omg.org/spec/BPMN/20100524/DI' xmlns:di='http://www.omg.org/spec/DD/20100524/DI' xmlns:dc='http://www.omg.org/spec/DD/20100524/DC' targetNamespace='http://www.sap.com/bpmn2/'><bpmn2:process id='process-6097de8b-7271-4f52-bf2e-d93635127b2d'><bpmn2:property id='1380e598-cf7f-43ad-b300-a320c64b1c4d' name='boundaryNotVisibleProperty'/><bpmn2:subscription id='adf2c70e-18c9-4cd9-ba15-ccb850b90128' name='Subscription'><bpmn2:outgoing>20f8d739-e327-437e-9b6e-5e9d8c00a76f</bpmn2:outgoing></bpmn2:subscription><bpmn2:bizService id='0f48e00c-f569-4f3f-94df-415a5e781167' name='SFC Complete'><bpmn2:incoming>20f8d739-e327-437e-9b6e-5e9d8c00a76f</bpmn2:incoming><bpmn2:incoming>1a96643d-d63b-4dab-8e07-c7d3d1ff6309</bpmn2:incoming><bpmn2:outgoing>9d6d797f-3621-4052-9bdc-7223f9831c42</bpmn2:outgoing></bpmn2:bizService><bpmn2:extService id='e9864a19-c39c-41c0-8573-1a1eb5694c34' name='Write Indicator Values'><bpmn2:incoming>9d6d797f-3621-4052-9bdc-7223f9831c42</bpmn2:incoming><bpmn2:outgoing>a8536e25-45c6-435d-8300-a222bee5a1c0</bpmn2:outgoing></bpmn2:extService><bpmn2:extService id='75d43402-0902-48c2-8b58-1b416b551d83' name='Read Indicator Values'><bpmn2:incoming>c9f27825-fe08-4057-a47f-a6c7f9e957f7</bpmn2:incoming><bpmn2:outgoing>1a96643d-d63b-4dab-8e07-c7d3d1ff6309</bpmn2:outgoing></bpmn2:extService><bpmn2:extService id='a91f6111-6277-4ffc-b21f-8726da068cbe' name='Read Indicator Values'><bpmn2:outgoing>c9f27825-fe08-4057-a47f-a6c7f9e957f7</bpmn2:outgoing></bpmn2:extService><bpmn2:automation id='6e2de22b-af64-4e64-b392-13ae319ac55e' name='pf'><bpmn2:incoming>a8536e25-45c6-435d-8300-a222bee5a1c0</bpmn2:incoming></bpmn2:automation><bpmn2:ppFlow id='20f8d739-e327-437e-9b6e-5e9d8c00a76f' name='SequenceFlow1' sourceRef='adf2c70e-18c9-4cd9-ba15-ccb850b90128' targetRef='0f48e00c-f569-4f3f-94df-415a5e781167'></bpmn2:ppFlow><bpmn2:ppFlow id='c9f27825-fe08-4057-a47f-a6c7f9e957f7' name='SequenceFlow2' sourceRef='a91f6111-6277-4ffc-b21f-8726da068cbe' targetRef='75d43402-0902-48c2-8b58-1b416b551d83'></bpmn2:ppFlow><bpmn2:ppFlow id='1a96643d-d63b-4dab-8e07-c7d3d1ff6309' name='SequenceFlow3' sourceRef='75d43402-0902-48c2-8b58-1b416b551d83' targetRef='0f48e00c-f569-4f3f-94df-415a5e781167'></bpmn2:ppFlow><bpmn2:ppFlow id='9d6d797f-3621-4052-9bdc-7223f9831c42' name='SequenceFlow4' sourceRef='0f48e00c-f569-4f3f-94df-415a5e781167' targetRef='e9864a19-c39c-41c0-8573-1a1eb5694c34'></bpmn2:ppFlow><bpmn2:ppFlow id='a8536e25-45c6-435d-8300-a222bee5a1c0' name='SequenceFlow5' sourceRef='e9864a19-c39c-41c0-8573-1a1eb5694c34' targetRef='6e2de22b-af64-4e64-b392-13ae319ac55e'></bpmn2:ppFlow></bpmn2:process><bpmndi:BPMNDiagram id='diagram-6097de8b-7271-4f52-bf2e-d93635127b2d' resolution='96.0'><bpmndi:BPMNPlane bpmnElement='process-6097de8b-7271-4f52-bf2e-d93635127b2d'><bpmndi:BPMNShape id='symbol-adf2c70e-18c9-4cd9-ba15-ccb850b90128' bpmnElement='adf2c70e-18c9-4cd9-ba15-ccb850b90128'><dc:Bounds x='15469' y='15743' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-0f48e00c-f569-4f3f-94df-415a5e781167' bpmnElement='0f48e00c-f569-4f3f-94df-415a5e781167'><dc:Bounds x='15457' y='15926' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-e9864a19-c39c-41c0-8573-1a1eb5694c34' bpmnElement='e9864a19-c39c-41c0-8573-1a1eb5694c34'><dc:Bounds x='15457' y='16071' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-6e2de22b-af64-4e64-b392-13ae319ac55e' bpmnElement='6e2de22b-af64-4e64-b392-13ae319ac55e'><dc:Bounds x='15482' y='16221' width='200' height='44'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-75d43402-0902-48c2-8b58-1b416b551d83' bpmnElement='75d43402-0902-48c2-8b58-1b416b551d83'><dc:Bounds x='15174' y='15921' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-a91f6111-6277-4ffc-b21f-8726da068cbe' bpmnElement='a91f6111-6277-4ffc-b21f-8726da068cbe'><dc:Bounds x='15153' y='15787' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNEdge id='symbol-20f8d739-e327-437e-9b6e-5e9d8c00a76f' bpmnElement='20f8d739-e327-437e-9b6e-5e9d8c00a76f' sourceElement='symbol-adf2c70e-18c9-4cd9-ba15-ccb850b90128' targetElement='symbol-0f48e00c-f569-4f3f-94df-415a5e781167'><di:waypoint x='15569' y='15802'></di:waypoint><di:waypoint x='15569' y='15927'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-c9f27825-fe08-4057-a47f-a6c7f9e957f7' bpmnElement='c9f27825-fe08-4057-a47f-a6c7f9e957f7' sourceElement='symbol-a91f6111-6277-4ffc-b21f-8726da068cbe' targetElement='symbol-75d43402-0902-48c2-8b58-1b416b551d83'><di:waypoint x='15253' y='15846'></di:waypoint><di:waypoint x='15253' y='15922'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-1a96643d-d63b-4dab-8e07-c7d3d1ff6309' bpmnElement='1a96643d-d63b-4dab-8e07-c7d3d1ff6309' sourceElement='symbol-75d43402-0902-48c2-8b58-1b416b551d83' targetElement='symbol-0f48e00c-f569-4f3f-94df-415a5e781167'><di:waypoint x='15373' y='15951'></di:waypoint><di:waypoint x='15458' y='15951'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-9d6d797f-3621-4052-9bdc-7223f9831c42' bpmnElement='9d6d797f-3621-4052-9bdc-7223f9831c42' sourceElement='symbol-0f48e00c-f569-4f3f-94df-415a5e781167' targetElement='symbol-e9864a19-c39c-41c0-8573-1a1eb5694c34'><di:waypoint x='15557' y='15985'></di:waypoint><di:waypoint x='15557' y='16072'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-a8536e25-45c6-435d-8300-a222bee5a1c0' bpmnElement='a8536e25-45c6-435d-8300-a222bee5a1c0' sourceElement='symbol-e9864a19-c39c-41c0-8573-1a1eb5694c34' targetElement='symbol-6e2de22b-af64-4e64-b392-13ae319ac55e'><di:waypoint x='15557' y='16130'></di:waypoint><di:waypoint x='15557' y='16222'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn2:definitions>";

    public static String NORMAL_CASE_ENTIRE_PP =
            "<bpmn2:definitions id='9ba40e32-4927-40c0-ade9-710d2c5cdc41' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:bpmn2='http://www.omg.org/spec/BPMN/20100524/MODEL' xmlns:bpmndi='http://www.omg.org/spec/BPMN/20100524/DI' xmlns:di='http://www.omg.org/spec/DD/20100524/DI' xmlns:dc='http://www.omg.org/spec/DD/20100524/DC' targetNamespace='http://www.sap.com/bpmn2/'><bpmn2:process id='process-9ba40e32-4927-40c0-ade9-710d2c5cdc41'><bpmn2:property id='193007e5-446d-4b5e-8c26-bbb6337c421b' name='boundaryNotVisibleProperty'/><bpmn2:extService id='f54523a8-9bcd-4e4b-80d7-f0dcb4bc7339' name='Read Indicator Values' type='READ' icon='sap-icon://display' pId='f624badc-d338-400d-adda-3ee61252c33c'><bpmn2:outgoing>48952a54-5896-4665-bee3-3404b8ad266d</bpmn2:outgoing></bpmn2:extService><bpmn2:extService id='fe63aa7a-f921-45e5-9f36-2b8bea31ba4a' name='Read Indicator Values' type='READ' icon='sap-icon://display' pId='bf38e216-c610-4b50-9ee5-0da50f50d2ff'><bpmn2:incoming>48952a54-5896-4665-bee3-3404b8ad266d</bpmn2:incoming><bpmn2:outgoing>a1e1c408-d662-4ecd-87c0-d9b6ae269f57</bpmn2:outgoing></bpmn2:extService><bpmn2:extService id='a6b224c7-04e5-4771-80c2-91572a42de64' name='Check Components' type='CHECK_COMPONENTS' icon='sap-icon://commission-check' pId='dc8e60f0-1ff4-400c-981d-88a7047e107c'><bpmn2:incoming>bb5bdaf9-b16a-4e09-9062-7beac428ee77</bpmn2:incoming><bpmn2:outgoing>0482c975-9fcc-4bfe-bb4a-a5ba335ffaea</bpmn2:outgoing></bpmn2:extService><bpmn2:extService id='35ce366b-0204-4602-b49e-4ebc79df5dfa' name='Check Data Collection' type='CHECK_DC' icon='sap-icon://check-availability' pId='7ad1ec0a-0692-4708-acfa-7c6518f3f7b7'><bpmn2:incoming>0482c975-9fcc-4bfe-bb4a-a5ba335ffaea</bpmn2:incoming></bpmn2:extService><bpmn2:bizService id='c989f38f-9549-4a5c-9094-bb64bc5b0dc3' name='SFC Start' type='START' icon='sap-icon://fob-watch' pId='a97b15a1-9b84-47fb-8dd5-c78e47a82d1a'><bpmn2:incoming>a1e1c408-d662-4ecd-87c0-d9b6ae269f57</bpmn2:incoming><bpmn2:incoming>b3723f4c-666d-4af6-87d4-20ff3de8bb35</bpmn2:incoming><bpmn2:outgoing>bb5bdaf9-b16a-4e09-9062-7beac428ee77</bpmn2:outgoing></bpmn2:bizService><bpmn2:subscription id='d93519e9-0118-499f-a955-e50771e39e85' name='Subscription' type='SUBSCRIPTION' icon='sap-icon://tag' pId='394dfc1a-21d8-487b-8933-18c4d59a2c65'><bpmn2:outgoing>b3723f4c-666d-4af6-87d4-20ff3de8bb35</bpmn2:outgoing></bpmn2:subscription><bpmn2:ppFlow id='48952a54-5896-4665-bee3-3404b8ad266d' name='SequenceFlow10' sourceRef='f54523a8-9bcd-4e4b-80d7-f0dcb4bc7339' targetRef='fe63aa7a-f921-45e5-9f36-2b8bea31ba4a'></bpmn2:ppFlow><bpmn2:ppFlow id='a1e1c408-d662-4ecd-87c0-d9b6ae269f57' name='SequenceFlow11' sourceRef='fe63aa7a-f921-45e5-9f36-2b8bea31ba4a' targetRef='c989f38f-9549-4a5c-9094-bb64bc5b0dc3'></bpmn2:ppFlow><bpmn2:ppFlow id='b3723f4c-666d-4af6-87d4-20ff3de8bb35' name='SequenceFlow12' sourceRef='d93519e9-0118-499f-a955-e50771e39e85' targetRef='c989f38f-9549-4a5c-9094-bb64bc5b0dc3'></bpmn2:ppFlow><bpmn2:ppFlow id='bb5bdaf9-b16a-4e09-9062-7beac428ee77' name='SequenceFlow13' sourceRef='c989f38f-9549-4a5c-9094-bb64bc5b0dc3' targetRef='a6b224c7-04e5-4771-80c2-91572a42de64'></bpmn2:ppFlow><bpmn2:ppFlow id='0482c975-9fcc-4bfe-bb4a-a5ba335ffaea' name='SequenceFlow14' sourceRef='a6b224c7-04e5-4771-80c2-91572a42de64' targetRef='35ce366b-0204-4602-b49e-4ebc79df5dfa'></bpmn2:ppFlow></bpmn2:process><bpmndi:BPMNDiagram id='diagram-9ba40e32-4927-40c0-ade9-710d2c5cdc41' resolution='96.0'><bpmndi:BPMNPlane bpmnElement='process-9ba40e32-4927-40c0-ade9-710d2c5cdc41'><bpmndi:BPMNShape id='symbol-f54523a8-9bcd-4e4b-80d7-f0dcb4bc7339' bpmnElement='f54523a8-9bcd-4e4b-80d7-f0dcb4bc7339'><dc:Bounds x='7091' y='8254' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-fe63aa7a-f921-45e5-9f36-2b8bea31ba4a' bpmnElement='fe63aa7a-f921-45e5-9f36-2b8bea31ba4a'><dc:Bounds x='7097' y='8400' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-c989f38f-9549-4a5c-9094-bb64bc5b0dc3' bpmnElement='c989f38f-9549-4a5c-9094-bb64bc5b0dc3'><dc:Bounds x='7460' y='8400' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-a6b224c7-04e5-4771-80c2-91572a42de64' bpmnElement='a6b224c7-04e5-4771-80c2-91572a42de64'><dc:Bounds x='7753' y='8400' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-35ce366b-0204-4602-b49e-4ebc79df5dfa' bpmnElement='35ce366b-0204-4602-b49e-4ebc79df5dfa'><dc:Bounds x='8063' y='8400' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-d93519e9-0118-499f-a955-e50771e39e85' bpmnElement='d93519e9-0118-499f-a955-e50771e39e85'><dc:Bounds x='7460' y='8200' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNEdge id='symbol-48952a54-5896-4665-bee3-3404b8ad266d' bpmnElement='48952a54-5896-4665-bee3-3404b8ad266d' sourceElement='symbol-f54523a8-9bcd-4e4b-80d7-f0dcb4bc7339' targetElement='symbol-fe63aa7a-f921-45e5-9f36-2b8bea31ba4a'><di:waypoint x='7191' y='8313'></di:waypoint><di:waypoint x='7191' y='8357.5'></di:waypoint><di:waypoint x='7228' y='8357.5'></di:waypoint><di:waypoint x='7228' y='8401'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-a1e1c408-d662-4ecd-87c0-d9b6ae269f57' bpmnElement='a1e1c408-d662-4ecd-87c0-d9b6ae269f57' sourceElement='symbol-fe63aa7a-f921-45e5-9f36-2b8bea31ba4a' targetElement='symbol-c989f38f-9549-4a5c-9094-bb64bc5b0dc3'><di:waypoint x='7296' y='8430'></di:waypoint><di:waypoint x='7461' y='8430'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-b3723f4c-666d-4af6-87d4-20ff3de8bb35' bpmnElement='b3723f4c-666d-4af6-87d4-20ff3de8bb35' sourceElement='symbol-d93519e9-0118-499f-a955-e50771e39e85' targetElement='symbol-c989f38f-9549-4a5c-9094-bb64bc5b0dc3'><di:waypoint x='7560' y='8259'></di:waypoint><di:waypoint x='7560' y='8401'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-bb5bdaf9-b16a-4e09-9062-7beac428ee77' bpmnElement='bb5bdaf9-b16a-4e09-9062-7beac428ee77' sourceElement='symbol-c989f38f-9549-4a5c-9094-bb64bc5b0dc3' targetElement='symbol-a6b224c7-04e5-4771-80c2-91572a42de64'><di:waypoint x='7659' y='8430'></di:waypoint><di:waypoint x='7754' y='8430'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-0482c975-9fcc-4bfe-bb4a-a5ba335ffaea' bpmnElement='0482c975-9fcc-4bfe-bb4a-a5ba335ffaea' sourceElement='symbol-a6b224c7-04e5-4771-80c2-91572a42de64' targetElement='symbol-35ce366b-0204-4602-b49e-4ebc79df5dfa'><di:waypoint x='7952' y='8430'></di:waypoint><di:waypoint x='8008.5' y='8430'></di:waypoint><di:waypoint x='8008.5' y='8439'></di:waypoint><di:waypoint x='8064' y='8439'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn2:definitions>";

    public static String NORMAL_CASE_WITHOUT_PRE_EXTENSION =
            "<bpmn2:definitions id='9ba40e32-4927-40c0-ade9-710d2c5cdc41' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:bpmn2='http://www.omg.org/spec/BPMN/20100524/MODEL' xmlns:bpmndi='http://www.omg.org/spec/BPMN/20100524/DI' xmlns:di='http://www.omg.org/spec/DD/20100524/DI' xmlns:dc='http://www.omg.org/spec/DD/20100524/DC' targetNamespace='http://www.sap.com/bpmn2/'><bpmn2:process id='process-9ba40e32-4927-40c0-ade9-710d2c5cdc41'><bpmn2:property id='0dcabf0f-d936-4f87-b5b6-397bf206bd43' name='boundaryNotVisibleProperty'/><bpmn2:bizService id='c989f38f-9549-4a5c-9094-bb64bc5b0dc3' name='SFC Start' type='START' icon='sap-icon://fob-watch' pId='a97b15a1-9b84-47fb-8dd5-c78e47a82d1a'><bpmn2:incoming>b3723f4c-666d-4af6-87d4-20ff3de8bb35</bpmn2:incoming><bpmn2:outgoing>bb5bdaf9-b16a-4e09-9062-7beac428ee77</bpmn2:outgoing></bpmn2:bizService><bpmn2:extService id='a6b224c7-04e5-4771-80c2-91572a42de64' name='Check Components' type='CHECK_COMPONENTS' icon='sap-icon://commission-check' pId='dc8e60f0-1ff4-400c-981d-88a7047e107c'><bpmn2:incoming>bb5bdaf9-b16a-4e09-9062-7beac428ee77</bpmn2:incoming><bpmn2:outgoing>0482c975-9fcc-4bfe-bb4a-a5ba335ffaea</bpmn2:outgoing></bpmn2:extService><bpmn2:extService id='35ce366b-0204-4602-b49e-4ebc79df5dfa' name='Check Data Collection' type='CHECK_DC' icon='sap-icon://check-availability' pId='7ad1ec0a-0692-4708-acfa-7c6518f3f7b7'><bpmn2:incoming>0482c975-9fcc-4bfe-bb4a-a5ba335ffaea</bpmn2:incoming></bpmn2:extService><bpmn2:subscription id='d93519e9-0118-499f-a955-e50771e39e85' name='Subscription' type='SUBSCRIPTION' icon='sap-icon://tag' pId='394dfc1a-21d8-487b-8933-18c4d59a2c65'><bpmn2:outgoing>b3723f4c-666d-4af6-87d4-20ff3de8bb35</bpmn2:outgoing></bpmn2:subscription><bpmn2:ppFlow id='b3723f4c-666d-4af6-87d4-20ff3de8bb35' name='SequenceFlow12' sourceRef='d93519e9-0118-499f-a955-e50771e39e85' targetRef='c989f38f-9549-4a5c-9094-bb64bc5b0dc3'></bpmn2:ppFlow><bpmn2:ppFlow id='bb5bdaf9-b16a-4e09-9062-7beac428ee77' name='SequenceFlow13' sourceRef='c989f38f-9549-4a5c-9094-bb64bc5b0dc3' targetRef='a6b224c7-04e5-4771-80c2-91572a42de64'></bpmn2:ppFlow><bpmn2:ppFlow id='0482c975-9fcc-4bfe-bb4a-a5ba335ffaea' name='SequenceFlow14' sourceRef='a6b224c7-04e5-4771-80c2-91572a42de64' targetRef='35ce366b-0204-4602-b49e-4ebc79df5dfa'></bpmn2:ppFlow></bpmn2:process><bpmndi:BPMNDiagram id='diagram-9ba40e32-4927-40c0-ade9-710d2c5cdc41' resolution='96.0'><bpmndi:BPMNPlane bpmnElement='process-9ba40e32-4927-40c0-ade9-710d2c5cdc41'><bpmndi:BPMNShape id='symbol-c989f38f-9549-4a5c-9094-bb64bc5b0dc3' bpmnElement='c989f38f-9549-4a5c-9094-bb64bc5b0dc3'><dc:Bounds x='7460' y='8400' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-a6b224c7-04e5-4771-80c2-91572a42de64' bpmnElement='a6b224c7-04e5-4771-80c2-91572a42de64'><dc:Bounds x='7753' y='8400' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-35ce366b-0204-4602-b49e-4ebc79df5dfa' bpmnElement='35ce366b-0204-4602-b49e-4ebc79df5dfa'><dc:Bounds x='8063' y='8400' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNShape id='symbol-d93519e9-0118-499f-a955-e50771e39e85' bpmnElement='d93519e9-0118-499f-a955-e50771e39e85'><dc:Bounds x='7460' y='8200' width='200' height='60'/><bpmndi:BPMNLabel/></bpmndi:BPMNShape><bpmndi:BPMNEdge id='symbol-b3723f4c-666d-4af6-87d4-20ff3de8bb35' bpmnElement='b3723f4c-666d-4af6-87d4-20ff3de8bb35' sourceElement='symbol-d93519e9-0118-499f-a955-e50771e39e85' targetElement='symbol-c989f38f-9549-4a5c-9094-bb64bc5b0dc3'><di:waypoint x='7560' y='8259'></di:waypoint><di:waypoint x='7560' y='8401'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-bb5bdaf9-b16a-4e09-9062-7beac428ee77' bpmnElement='bb5bdaf9-b16a-4e09-9062-7beac428ee77' sourceElement='symbol-c989f38f-9549-4a5c-9094-bb64bc5b0dc3' targetElement='symbol-a6b224c7-04e5-4771-80c2-91572a42de64'><di:waypoint x='7659' y='8430'></di:waypoint><di:waypoint x='7754' y='8430'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge><bpmndi:BPMNEdge id='symbol-0482c975-9fcc-4bfe-bb4a-a5ba335ffaea' bpmnElement='0482c975-9fcc-4bfe-bb4a-a5ba335ffaea' sourceElement='symbol-a6b224c7-04e5-4771-80c2-91572a42de64' targetElement='symbol-35ce366b-0204-4602-b49e-4ebc79df5dfa'><di:waypoint x='7952' y='8430'></di:waypoint><di:waypoint x='8008.5' y='8430'></di:waypoint><di:waypoint x='8008.5' y='8439'></di:waypoint><di:waypoint x='8064' y='8439'></di:waypoint><bpmndi:BPMNLabel/></bpmndi:BPMNEdge></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn2:definitions>";

    @Test
    public void testGetInstanceFailed() {
        try {
            ProductionProcessParser ppParser = new ProductionProcessParser();
            ppParser.getInstance(null);
        } catch (MODRuntimeException e) {
            Assert.assertEquals(ErrorCode.ERR_PARSE_BPMN, e.getErrorCode());
        }
    }

    @Test
    public void testNormalCaseSucceed() {
        ProductionProcessParser ppParser = new ProductionProcessParser();
        ppParser.getInstance(VALID_PRODUCTION_PROCESS);

        for (DMEChain dmeChain : ppParser.getDmeChainMap().keySet()) {
            for (Node node : dmeChain.getChain()) {
                String info = String.format("%s : %s", ppParser.getAttrValue(node, "id"), ppParser.getAttrValue(node, "name"));
                logger.info(info);
            }
        }
        Assert.assertTrue(ppParser.getAllNodes().size() == 10);
        Assert.assertTrue(ppParser.getComponents().size() == 5);
    }

    @Test
    public void testWithEntirePP() {
        ProductionProcessParser ppParser = new ProductionProcessParser();
        ppParser.getInstance(NORMAL_CASE_ENTIRE_PP);

        for (DMEChain dmeChain : ppParser.getDmeChainMap().keySet()) {
            for (Node node : dmeChain.getChain()) {
                String info = String.format("%s : %s", ppParser.getAttrValue(node, "id"), ppParser.getAttrValue(node, "name"));
                logger.info(info);
            }
        }
        Assert.assertTrue(ppParser.getAllNodes().size() == 10);
        Assert.assertTrue(ppParser.getComponents().size() == 5);
    }

    @Test
    public void testWithoutPreExtension() {
        ProductionProcessParser ppParser = new ProductionProcessParser();
        ppParser.getInstance(NORMAL_CASE_WITHOUT_PRE_EXTENSION);

        for (DMEChain dmeChain : ppParser.getDmeChainMap().keySet()) {
            for (Node node : dmeChain.getChain()) {
                String info = String.format("%s : %s", ppParser.getAttrValue(node, "id"), ppParser.getAttrValue(node, "name"));
                logger.info(info);
            }
        }
        Assert.assertTrue(ppParser.getAllNodes().size() == 6);
        Assert.assertTrue(ppParser.getComponents().size() == 3);
    }

}
